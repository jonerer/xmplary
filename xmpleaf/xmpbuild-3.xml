<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="create_run_jar" name="Create Runnable Jar for Project xmpleaf">
    <!--this file was created by Eclipse Runnable JAR Export Wizard-->
    <!--ANT 1.7 is required                                        -->
    <target name="create_run_jar">
    	<property name="certname" value="XMPLary_Leaf_3" />
    	<property name="config" value="conf-3.xml" />
    	<property name="buildfolder" value="build-3/build/" />

    	<jar destfile="${buildfolder}jar/xmplary.jar" filesetmanifest="mergewithoutmain">
            <manifest>
                <attribute name="Main-Class" value="se.lolcalhost.xmplary.xmpleaf.LeafMain"/>
                <attribute name="Class-Path" value="."/>
            </manifest>
            <fileset dir="bin"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/smack.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/smackx.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/ormlite-core-4.42.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/log4j-1.2.17.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/JSON-java.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/joda-time-2.1.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/ormlite-jdbc-4.42.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/hsqldb.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/bcmail-jdk15on-147.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/bcpkix-jdk15on-147.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/bcprov-debug-jdk15on-147.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/bcprov-ext-debug-jdk15on-147.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/jcommon-1.0.17.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/jfreechart-1.0.14.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/vt-crypt-2.1.4.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../xmpcommon/lib/commons-logging-1.1.1.jar"/>
        </jar>
    	
    	<copy file="../run.sh" todir="${buildfolder}" />
    	<copy file="../xmpcommon/files/log5j.properties" todir="${buildfolder}files/" />
       	<copy file="../certs/certs/${certname}.crt" todir="${buildfolder}certs/certs"/>
       	<copy todir="${buildfolder}certs/certs/ca">
       		<fileset dir="../certs/certs/ca"/>
   		</copy>
       	<copy file="../certs/keys/${certname}.pem" todir="${buildfolder}certs/keys"/>
    	<copy file="files/${config}" tofile="${buildfolder}files/conf.xml" />
    </target>
</project>
